前章ではレイヤーを使っての当たり判定の制御やアニメーションイベントについて学びました。
この章では、ゲーム画面の背景を作成していきます。



![](public://learn/background_1.png)



背景を作成するわけですが、ここで今回のチュートリアルでやりたいことを整理します。



``` {.emlist}
 1:  背景は全部で3枚の画像で出来ている
 2:  背景をスクロールさせる（動く）
 3:  それぞれの画像のスクロールするスピードは異なる（多重スクロールで奥行きを表現）
```



6.1　3枚の画像を表示させる
-------------------------------------------------

今回は背景をスクロールさせるために**Quadにテクスチャを貼り付けます。**
まずは、空のGameObjectを作成し、名前を**Backgrounds**とします。



![](public://learn/create_backgrounds.png)



6.2　Frontを作る
---------------------------------------

次に`GameObject -> 3D Object -> Quad`からQuadを作成します。そして、名前を**Front**としてBackgroundsの子要素としましょう。
**BackgroundsとFront**のTransformの位置はともに**X 0 Y 0 Z
0**となるようにしてください。



![](public://learn/create_backgrounds_front.png)



Frontの大きさを変更します。Frontの**Scaleを X 8 Y 6 Z 1** とします。



![](public://learn/change_front_scale.png)



`Materialsフォルダ`にある**Background-Front**をQuadにドラッグ＆ドロップします。



![](public://learn/drag_front_material.png)



<br/>図6.1のように画面いっぱいに背景が表示されましたか？



![](public://learn/changed_front_scale.png)
<br/>図6.1:





### 背景が画面いっぱいに表示されない場合

メインカメラの設定を忘れている可能性があります。
画像を見ながら、**Projection**と**Size**の設定を確認して下さい。


![](public://learn/main_camera.png)





6.3　MiddleとBackを作る
----------------------------------------------

**Front**を複製して**MiddleとBack**を作成します。





![](public://learn/duplicate_front.png)





![](public://learn/created_middle_and_back.png)





次に、MiddleとBackそれぞれのマテリアルを変更します。今回は、マテリアルをそれぞれのヒエラルキーの方へドラッグ＆ドロップしましょう。



![](public://learn/drag_middle_and_back_material.png)



6.4　3枚の位置を調整する
-----------------------------------------------

Frontの**Z位置を0.1**、Middleの**Z位置を0.2**、Backの**Z位置を0.3**にします。





![](public://learn/front_position.png)





![](public://learn/middle_position.png)





![](public://learn/back_position.png)





これで正しく表示されるようになりました。



![](public://learn/background_2.png)



6.5　背景をスクロールさせる
--------------------------------------------------

**Background.cs**をScriptsフォルダの中に作成します。



Background.cs

```cs
using UnityEngine;

public class Background : MonoBehaviour
{
	// スクロールするスピード
	public float speed = 0.1f;
	
	void Update ()
	{
		// 時間によってYの値が0から1に変化していく。1になったら0に戻り、繰り返す。
		float y = Mathf.Repeat (Time.time * speed, 1);
		
		// Yの値がずれていくオフセットを作成
		Vector2 offset = new Vector2 (0, y);
		
		// マテリアルにオフセットを設定する
		GetComponent<Renderer>().sharedMaterial.SetTextureOffset ("_MainTex", offset);
	}
}
```



**Background.cs**をFront、Middle、Backそれぞれにアタッチします。



![](public://learn/attach_background.png)



次にテクスチャをスクロールできるようにテクスチャの**Wrap
Mode**が**Repeat**になっていることを確認して下さい。



![](public://learn/check_repeat.png)



ゲームを再生してみてください。背景がスクロールされるはずです。
3枚のテクスチャそれぞれのスクロールスピードを変更してみましょう。
FrontのSpeedは**0.1**、MiddleのSpeedは**0.08**、BackのSpeedは**0.02**にします。





![Front](public://learn/front_speed.png)
<br/>図6.2: Front





![Middle](public://learn/middle_speed.png)
<br/>図6.3: Middle





![Back](public://learn/back_speed.png)
<br/>図6.4: Back





ゲームを再生してみてください。それぞれ異なるスピードでスクロールされるはずです。



### スプライトでオフセットの変更はできない

今回、背景でスプライトを使用しなかったのには理由があります。
テクスチャがスプライトとして使用されている時はオフセットの変更ができません。


![うまくいかないという警告が出る](public://learn/sprite_offset.png)
<br/>図6.5: うまくいかないという警告が出る





### 第06回終わり

今回はここで終了です。つまずいてしまった方はプロジェクトファイルをダウンロードして新たな気持ちで次の回へ進みましょう。

[今回のプロジェクトファイルをダウンロード](http://unity3d.com-jp-learn-tutorials.s3.amazonaws.com/2d-shooting-game/project/game_06_ShootingGame.zip)
